# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

## ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - –ü–ï–†–ï–ù–ï–°–ï–ù–´

### 1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—ã—Ö–æ–¥–µ —Å–µ—Ä–∏–π
- ‚úÖ `send_series_notification` - –≤ `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 853)
- ‚úÖ `check_series_for_new_episodes` - –≤ `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 974)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `series_callbacks.py` –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ —Å–µ—Ä–∏–∞–ª
- ‚ö†Ô∏è **–ü–†–û–ë–õ–ï–ú–ê**: –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á–∏ –≤ scheduler –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –±–æ—Ç–∞
  - –í —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ –∑–∞–¥–∞—á–∏ –¥–æ–±–∞–≤–ª—è–ª–∏—Å—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ
  - –í –Ω–æ–≤–æ–º –∫–æ–¥–µ –∑–∞–¥–∞—á–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ —á–µ—Ä–µ–∑ `scheduler.add_job` –≤ `series_callbacks.py`

### 2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–∏–ª—å–º–µ
- ‚úÖ `send_plan_notification` - –≤ `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 42)
- ‚úÖ `check_and_send_plan_notifications` - –≤ `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 160)
- ‚úÖ –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ `main.py` (—Å—Ç—Ä–æ–∫–∞ 76): `scheduler.add_job(check_and_send_plan_notifications, 'interval', minutes=5)`

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –±–∏–ª–µ—Ç–æ–º –ø–µ—Ä–µ–¥ —Ñ–∏–ª—å–º–æ–º
- ‚úÖ `send_ticket_notification` - –≤ `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 102)
- ‚úÖ –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∏–∑ `check_and_send_plan_notifications` (—Å—Ç—Ä–æ–∫–∞ 443)
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É `ticket_before_minutes` –∏–∑ `get_notification_settings`

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- ‚úÖ `get_notification_settings` - –≤ `moviebot/database/db_operations.py` (—Å—Ç—Ä–æ–∫–∞ 421)
- ‚úÖ `set_notification_setting` - –≤ `moviebot/database/db_operations.py` (—Å—Ç—Ä–æ–∫–∞ 477)
- ‚ùå **–ü–†–û–ë–õ–ï–ú–ê**: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ù–ï –ü–ï–†–ï–ù–ï–°–ï–ù–´
  - –í `series.py` –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ "‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π" –∏ "üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π" (—Å—Ç—Ä–æ–∫–∏ 306, 308)
  - –ù–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ `settings:notifications`, `settings:notify:*`, `reminder:*` –ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–´
  - –í —Å—Ç–∞—Ä–æ–º –∫–æ–¥–µ: —Å—Ç—Ä–æ–∫–∏ 22360-22550 –≤ `moviebot.py.OLD_DO_NOT_USE`
  - –ù—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `series.py` –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å `settings_callbacks.py`

## ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π - –ü–ï–†–ï–ù–ï–°–ï–ù–´

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º
- ‚úÖ `has_notifications_access` - –≤ `moviebot/utils/helpers.py` (—Å—Ç—Ä–æ–∫–∞ 11)
- ‚úÖ `has_tickets_access` - –≤ `moviebot/utils/helpers.py` (—Å—Ç—Ä–æ–∫–∞ 48)
- ‚úÖ `has_recommendations_access` - –≤ `moviebot/utils/helpers.py` (—Å—Ç—Ä–æ–∫–∞ 85)
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ª–∏—á–Ω—ã–µ –∏ –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –î–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è (user_id 301810276) –≤—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–æ—Å—Ç—É–ø

### 2. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
- ‚úÖ `series_locked` callback - –≤ `series_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 423)
- ‚úÖ –ö–Ω–æ–ø–∫–∏ —Å üîí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–æ—Å—Ç—É–ø–∞:
  - –í `series.py`: —Å—Ç—Ä–æ–∫–∏ 912-913, 1171-1172
  - –í `start.py`: —Å—Ç—Ä–æ–∫–∞ 148 (–±–∏–ª–µ—Ç—ã)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥–µ–π—Å—Ç–≤–∏–π:
  - `series_callbacks.py`: —Å—Ç—Ä–æ–∫–∏ 44, 100, 298
  - `series.py`: —Å—Ç—Ä–æ–∫–∏ 237, 305, 311, 851

## ‚ùå –ß–¢–û –ù–£–ñ–ù–û –ò–°–ü–†–ê–í–ò–¢–¨

### 1. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–ù—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–∑ `moviebot.py.OLD_DO_NOT_USE` (—Å—Ç—Ä–æ–∫–∏ 22360-22550):
- `settings:notifications` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
- `settings:notify:separate_toggle` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –±—É–¥–Ω–∏/–≤—ã—Ö–æ–¥–Ω—ã–µ
- `settings:notify:home` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- `settings:notify:cinema` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –∫–∏–Ω–æ
- `settings:notify:tickets` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–∏–ª–µ—Ç–æ–≤
- `settings:notify:regular_reminders` - —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è
- `reminder:enable:*` / `reminder:disable:*` - –≤–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Ä–µ–º–µ–Ω–∏ (—á–µ—Ä–µ–∑ `user_settings_state`)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∑–∞–¥–∞—á –¥–ª—è —Å–µ—Ä–∏–π
- –ó–∞–¥–∞—á–∏ –¥–ª—è —Å–µ—Ä–∏–π –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–æ–¥–ø–∏—Å–∫–µ (—ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- –ù–æ –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –∑–∞–¥–∞—á–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ –±–∞–∑—ã

## üìã –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ:
1. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—ã—Ö–æ–¥–µ —Å–µ—Ä–∏–π
2. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–∏–ª—å–º–µ
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –±–∏–ª–µ—Ç–æ–º –ø–µ—Ä–µ–¥ —Ñ–∏–ª—å–º–æ–º
4. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏
5. –ü—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ—É–Ω–∫—Ü–∏—è–º

### ‚ùå –ù–µ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ:
1. **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** - –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –∫–æ–¥–∞

