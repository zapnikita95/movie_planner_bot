# Обоснование разрешений для Chrome Web Store

## Разрешение `tabs`

**Разрешение:** `tabs`

**Обоснование:**

Разрешение `tabs` используется для следующих критических функций расширения:

1. **Получение актуального URL текущей вкладки при открытии popup:**
   - Функция `loadCurrentTabFilm()` в `popup.js` использует `chrome.tabs.query({ active: true, currentWindow: true })` для получения актуального URL страницы
   - Это критично для работы на SPA (Single Page Application) сайтах, где URL может не изменяться при навигации, но контент на странице меняется
   - Без этого разрешения расширение не сможет корректно определять, какой фильм/сериал просматривает пользователь

2. **Открытие popup программно:**
   - В `background.js` используется `chrome.action.openPopup()` для открытия popup при нажатии кнопки "Добавить билеты" на билетных сайтах
   - Это необходимо для автоматизации процесса добавления билетов к планам просмотра

**Альтернативы:**
- Разрешение `activeTab` не позволяет получать URL вкладки программно при открытии popup
- Без разрешения `tabs` невозможно реализовать корректную работу на SPA сайтах и автоматизацию процессов

**Использование:**
- `chrome.tabs.query()` - для получения информации о текущей вкладке
- `chrome.action.openPopup()` - для программного открытия popup

---

## Разрешение `scripting`

**Статус:** ❌ **НЕ ИСПОЛЬЗУЕТСЯ**

Разрешение `scripting` **НЕ** запрашивается в `manifest.json` и **НЕ** используется в коде расширения.

Все функции реализованы через:
- Content Scripts (зарегистрированы в `manifest.json`)
- Message passing между content scripts и background/popup
- DOM API для чтения информации со страниц

**Подтверждение:**
- В `manifest.json` отсутствует `"scripting"` в массиве `permissions`
- В коде расширения отсутствуют вызовы `chrome.scripting.executeScript()` или `chrome.scripting.insertCSS()`
