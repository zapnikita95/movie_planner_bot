# –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è

## –ü—Ä–æ–±–ª–µ–º–∞: "–û—à–∏–±–∫–∞ —Å–µ—Ç–∏" –ø—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–¥–∞

### ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏** - –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤–æ –≤—Å–µ API endpoints
2. **OPTIONS preflight** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ preflight –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ–±–∞–≤–ª–µ–Ω–æ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

#### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ DevTools —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è:

1. –û—Ç–∫—Ä–æ–π—Ç–µ popup —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
2. –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç" (–∏–ª–∏ F12)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Console**
4. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–≤—è–∑–∞—Ç—å"
5. –°–º–æ—Ç—Ä–∏—Ç–µ –æ—à–∏–±–∫–∏ –≤ Console

#### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ Network –∑–∞–ø—Ä–æ—Å–æ–≤:

1. –í DevTools –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **Network**
2. –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫ `/api/extension/verify`
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
   - **Status**: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 200
   - **Headers**: –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏
   - **Response**: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å JSON —Å `success: true`

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Railway:

–ü–æ—Å–ª–µ –≤–≤–æ–¥–∞ –∫–æ–¥–∞ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
```
[EXTENSION API] GET /api/extension/verify - code=...
[EXTENSION API] OPTIONS preflight request for /api/extension/verify
```

–ï—Å–ª–∏ –ª–æ–≥–æ–≤ –Ω–µ—Ç - –∑–∞–ø—Ä–æ—Å –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞.

### üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

#### 1. CORS –æ—à–∏–±–∫–∞ –≤ Console:
```
Access to fetch at '...' from origin 'chrome-extension://...' has been blocked by CORS policy
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Railway –∑–∞–¥–µ–ø–ª–æ–∏–ª –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å CORS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏.

#### 2. 404 Not Found:
```
GET https://web-production-3921c.up.railway.app/api/extension/verify?code=... 404
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∏ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω.

#### 3. 500 Internal Server Error:
```
GET ... 500 (Internal Server Error)
```

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway - —Ç–∞–º –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞.

#### 4. Network Error / Failed to fetch:
```
Failed to fetch
NetworkError when attempting to fetch resource
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
- –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º/–∞–Ω—Ç–∏–≤–∏—Ä—É—Å–æ–º

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL –≤ `popup.js`: `https://web-production-3921c.up.railway.app`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω: –æ—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ `https://web-production-3921c.up.railway.app/health`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –Ω–∞–ø—Ä—è–º—É—é:

#### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (–Ω–∞ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ):
```javascript
fetch('https://web-production-3921c.up.railway.app/api/extension/verify?code=TEST123')
  .then(r => r.json())
  .then(console.log)
  .catch(console.error)
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ CORS –æ—à–∏–±–∫—É - –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö (–Ω–æ –º—ã –∏—Ö —É–∂–µ –¥–æ–±–∞–≤–∏–ª–∏).

#### –í –∫–æ–Ω—Å–æ–ª–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (DevTools popup):
```javascript
fetch('https://web-production-3921c.up.railway.app/api/extension/verify?code=YOUR_CODE')
  .then(r => r.json())
  .then(console.log)
  .catch(console.error)
```

### üìã –ß–µ–∫–ª–∏—Å—Ç –æ—Ç–ª–∞–¥–∫–∏:

- [ ] Railway –∑–∞–¥–µ–ø–ª–æ–∏–ª –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- [ ] URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π: `https://web-production-3921c.up.railway.app`
- [ ] –°–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `/health`)
- [ ] –¢–∞–±–ª–∏—Ü–∞ `extension_links` —Å–æ–∑–¥–∞–Ω–∞ –≤ –ë–î
- [ ] –ö–æ–¥ –Ω–µ –∏—Å—Ç–µ–∫ (–¥–µ–π—Å—Ç–≤—É–µ—Ç 10 –º–∏–Ω—É—Ç)
- [ ] –ö–æ–¥ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ä–∞–Ω–µ–µ
- [ ] –í Console –Ω–µ—Ç –æ—à–∏–±–æ–∫ JavaScript
- [ ] –í Network –≤–∏–¥–µ–Ω –∑–∞–ø—Ä–æ—Å –∫ API
- [ ] –í –ª–æ–≥–∞—Ö Railway –≤–∏–¥–Ω—ã –∑–∞–ø—Ä–æ—Å—ã

### üîß –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

1. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ:**
   - `chrome://extensions/`
   - –ù–∞–∂–º–∏—Ç–µ "–û–±–Ω–æ–≤–∏—Ç—å" –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é –Ω–∞ Railway:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç –∑–∞–¥–µ–ø–ª–æ–µ–Ω

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway:**
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ `[EXTENSION API]` –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ –ë–î:**
   ```sql
   SELECT * FROM extension_links WHERE code = 'YOUR_CODE';
   ```
