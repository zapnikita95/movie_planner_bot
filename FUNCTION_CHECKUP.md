# üîç –ß–µ–∫–∞–ø —Ñ—É–Ω–∫—Ü–∏–π: –†–∞–Ω–¥–æ–º, –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

**–î–∞—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:** 5 —è–Ω–≤–∞—Ä—è 2026  
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É

---

## üé≤ –†–ê–ù–î–û–ú (–í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã)

### –ö–æ–º–∞–Ω–¥–∞ `/random`
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è:** `random_start(message)`  
- ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 247)  
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù–ê

### –†–µ–∂–∏–º—ã —Ä–∞–Ω–¥–æ–º–∞:
1. ‚úÖ **üé≤ –†–∞–Ω–¥–æ–º –ø–æ —Å–≤–æ–µ–π –±–∞–∑–µ** (`rand_mode:database`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_mode` –≤ `random_callbacks.py`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/callbacks/random_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 20)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

2. ‚úÖ **üé¨ –†–∞–Ω–¥–æ–º –ø–æ –∫–∏–Ω–æ–ø–æ–∏—Å–∫—É** (`rand_mode:kinopoisk`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_mode` –≤ `random_callbacks.py`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/callbacks/random_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 20)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É:** –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

3. ‚úÖ **‚≠ê –ü–æ –æ—Ü–µ–Ω–∫–∞–º –≤ –±–∞–∑–µ** (`rand_mode:group_votes`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_mode` –≤ `random_callbacks.py`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/callbacks/random_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 20)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É:** –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

4. ‚úÖ **‚≠ê –ü–æ –º–æ–∏–º –æ—Ü–µ–Ω–∫–∞–º (9-10)** (`rand_mode:my_votes`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_mode` –≤ `random_callbacks.py`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/callbacks/random_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 20)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É:** –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç:** –ú–∏–Ω–∏–º—É–º 50 –æ—Ü–µ–Ω–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### Callback handlers –¥–ª—è —Ä–∞–Ω–¥–æ–º–∞:
- ‚úÖ `rand_mode:` - –≤—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `random_mode_handler` –≤ `random_callbacks.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/callbacks/random_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 20)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ `rand_mode_locked:` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `random_mode_locked_handler` –≤ `random_callbacks.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/callbacks/random_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 205)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ `rand_period:` - –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_period` –≤ `series.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 856)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ `rand_year:` - –≤—ã–±–æ—Ä –≥–æ–¥–∞
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_year` –≤ `series.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 1390)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ `rand_genre:` - –≤—ã–±–æ—Ä –∂–∞–Ω—Ä–∞
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_genre` –≤ `series.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 1464)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ `rand_dir:` - –≤—ã–±–æ—Ä —Ä–µ–∂–∏—Å—Å–µ—Ä–∞
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_dir` –≤ `series.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 1586)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ `rand_actor:` - –≤—ã–±–æ—Ä –∞–∫—Ç–µ—Ä–∞
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_actor` –≤ `series.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 1638)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ `rand_final:` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫ —Ñ–∏–ª—å–º–∞
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_rand_final` –≤ `series.py`
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 1682)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è handlers —Ä–∞–Ω–¥–æ–º–∞:
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:** `register_random_callbacks(bot)`
- ‚úÖ **–§–∞–π–ª:** `moviebot/bot/callbacks/random_callbacks.py` (—Å—Ç—Ä–æ–∫–∞ 17)
- ‚úÖ **–í—ã–∑–æ–≤ –≤ main.py:** ‚úÖ –î–∞ (—Å—Ç—Ä–æ–∫–∞ 209)
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò (–í—Å—ë, —á—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ /settings)

### –ö–æ–º–∞–Ω–¥–∞ `/settings`
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è:** `settings_command(message)`
- ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 28)
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù–ê

### –ö–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é /settings:

1. ‚úÖ **üòÄ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —ç–º–æ–¥–∑–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞** (`settings:emoji`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="emoji")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 193)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚úÖ **–ü–æ–¥—Ñ—É–Ω–∫—Ü–∏–∏:**
     - ‚úÖ `settings:add` - –¥–æ–±–∞–≤–∏—Ç—å –∫ —Ç–µ–∫—É—â–∏–º
     - ‚úÖ `settings:replace` - –∑–∞–º–µ–Ω–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é
     - ‚úÖ `settings:reset` - —Å–±—Ä–æ—Å–∏—Ç—å

2. ‚úÖ **üïê –í—ã–±—Ä–∞—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å** (`settings:timezone`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="timezone")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 454)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚úÖ **Callback:** `timezone:Moscow`, `timezone:Serbia`
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ timezone:** `handle_timezone_callback`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 887)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

3. ‚úÖ **‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π** (`settings:notifications`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="notifications")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 230)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É:** –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - ‚úÖ **–ü–æ–¥—Ñ—É–Ω–∫—Ü–∏–∏:**
     - ‚úÖ `settings:notify:separate_toggle` - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –±—É–¥–Ω–∏/–≤—ã—Ö–æ–¥–Ω—ã–µ
     - ‚úÖ `settings:notify:home` - –¥–æ–º–∞—à–Ω–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä
     - ‚úÖ `settings:notify:cinema` - –ø—Ä–æ—Å–º–æ—Ç—Ä –≤ –∫–∏–Ω–æ
     - ‚úÖ `settings:notify:tickets` - –±–∏–ª–µ—Ç—ã –Ω–∞ —Å–µ–∞–Ω—Å
     - ‚úÖ `settings:notify:regular_reminders` - —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è

4. ‚úÖ **üì• –ò–º–ø–æ—Ä—Ç –±–∞–∑—ã –∏–∑ –ö–∏–Ω–æ–ø–æ–∏—Å–∫–∞** (`settings:import`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="import")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 292)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É:** –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

5. ‚úÖ **üé≤ –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è** (`settings:random_events`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="random_events")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 143)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù
   - ‚ö†Ô∏è **–î–æ—Å—Ç—É–ø–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö**
   - ‚úÖ **–ü–æ–¥—Ñ—É–Ω–∫—Ü–∏–∏:**
     - ‚úÖ `settings:random_events:enable` - –≤–∫–ª—é—á–∏—Ç—å
     - ‚úÖ `settings:random_events:disable` - –≤—ã–∫–ª—é—á–∏—Ç—å
     - ‚úÖ `settings:random_events:example:with_user` - –ø—Ä–∏–º–µ—Ä —Å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º
     - ‚úÖ `settings:random_events:example:without_user` - –ø—Ä–∏–º–µ—Ä –±–µ–∑ —É—á–∞—Å—Ç–Ω–∏–∫–∞

6. ‚úÖ **‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏** (`settings:edit`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="edit")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 483)
   - ‚úÖ **–í—ã–∑—ã–≤–∞–µ—Ç:** `edit_command` –∏–∑ `settings/edit.py`
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

7. ‚úÖ **üóëÔ∏è –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã** (`settings:clean`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="clean")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 509)
   - ‚úÖ **–í—ã–∑—ã–≤–∞–µ—Ç:** `clean_command` –∏–∑ `settings/clean.py`
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

8. ‚úÖ **üë• –£—á–∞—Å—Ç–∏–µ** (`settings:join`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="join")
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 535)
   - ‚úÖ **–í—ã–∑—ã–≤–∞–µ—Ç:** `join_command` –∏–∑ `settings/join.py`
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

9. ‚úÖ **‚¨ÖÔ∏è –ù–∞–∑–∞–¥ –≤ –º–µ–Ω—é** (`back_to_start_menu`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** –í `start.py`
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

### –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:
- ‚úÖ `settings:notifications_locked` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π
- ‚úÖ `settings:import_locked` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç
- ‚úÖ `settings:random_events_locked` - –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–¥–ª—è –ª–∏—á–Ω—ã—Ö —á–∞—Ç–æ–≤)

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è handlers –Ω–∞—Å—Ç—Ä–æ–µ–∫:
- ‚úÖ **–ì–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback`
- ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 90)
- ‚úÖ **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä:** `@bot_instance.callback_query_handler(func=lambda call: call.data and call.data.startswith("settings:"))`
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù (–Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è)

- ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ timezone:** `handle_timezone_callback`
- ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 887)
- ‚úÖ **–î–µ–∫–æ—Ä–∞—Ç–æ—Ä:** `@bot_instance.callback_query_handler(func=lambda call: call.data.startswith("timezone:"))`
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù (–Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è)

- ‚úÖ **–§—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:** `register_settings_handlers(bot)`
- ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 919)
- ‚úÖ **–í—ã–∑–æ–≤ –≤ main.py:** ‚úÖ –î–∞ (—Å—Ç—Ä–æ–∫–∞ 180)
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ó–ê–†–ï–ì–ò–°–¢–†–ò–†–û–í–ê–ù

---

## üé≤ –°–õ–£–ß–ê–ô–ù–´–ï –°–û–ë–´–¢–ò–Ø

### –§—É–Ω–∫—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π:

1. ‚úÖ **–í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞** (`choose_random_participant`)
   - ‚úÖ **–§—É–Ω–∫—Ü–∏—è:** `choose_random_participant()`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 1868)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù–ê
   - ‚úÖ **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 12:00 (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç 14 –¥–Ω–µ–π)
   - ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ scheduler:** ‚úÖ –î–∞ (main.py, —Å—Ç—Ä–æ–∫–∞ 129)

2. ‚úÖ **–ò–≥—Ä–∞ –≤ –∫—É–±–∏–∫** (`start_dice_game`)
   - ‚úÖ **–§—É–Ω–∫—Ü–∏—è:** `start_dice_game()`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 2012)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù–ê
   - ‚úÖ **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ:** –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 14:00 (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç 14 –¥–Ω–µ–π)
   - ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤ scheduler:** ‚úÖ –î–∞ (main.py, —Å—Ç—Ä–æ–∫–∞ 131)

3. ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ë—Ä–æ—Å–∏—Ç—å –∫—É–±–∏–∫"** (`dice_game:start`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_dice_game_start`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 2938)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

4. ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∫—É–±–∏–∫–∞** (`handle_dice_result`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_dice_result`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 3043)
   - ‚úÖ **–¢–∏–ø:** `@bot_instance.message_handler(content_types=['dice'])`
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

5. ‚úÖ **–ó–∞–∫—Ä—ã—Ç–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è** (`random_event:close`)
   - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_random_event_close`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/series.py` (—Å—Ç—Ä–æ–∫–∞ 2915)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

6. ‚úÖ **–£—Ç–∏–ª–∏—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –∏–≥—Ä—ã –≤ –∫—É–±–∏–∫** (`update_dice_game_message`)
   - ‚úÖ **–§—É–Ω–∫—Ü–∏—è:** `update_dice_game_message`
   - ‚úÖ **–§–∞–π–ª:** `moviebot/utils/random_events.py` (—Å—Ç—Ä–æ–∫–∞ 19)
   - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù–ê

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π:
- ‚úÖ **–í–∫–ª—é—á–µ–Ω–∏–µ/–≤—ã–∫–ª—é—á–µ–Ω–∏–µ:** `settings:random_events:enable/disable`
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="random_events:")
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 419)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ **–ü—Ä–∏–º–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π:** `settings:random_events:example:with_user/without_user`
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** `handle_settings_callback` (action="random_events:example:")
  - ‚úÖ **–§–∞–π–ª:** `moviebot/bot/handlers/settings.py` (—Å—Ç—Ä–æ–∫–∞ 312)
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

- ‚úÖ **–û—Ç–∫–ª—é—á–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:** `reminder:disable:random_events`
  - ‚úÖ **–û–±—Ä–∞–±–æ—Ç—á–∏–∫:** –í `scheduler.py` –∏–ª–∏ —á–µ—Ä–µ–∑ `settings:notify:regular_reminders`
  - ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∫–ª—é—á–µ–Ω–Ω–æ—Å—Ç–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π:
- ‚úÖ **–§—É–Ω–∫—Ü–∏—è:** `get_random_events_enabled(chat_id)`
- ‚úÖ **–§–∞–π–ª:** `moviebot/scheduler.py` (—Å—Ç—Ä–æ–∫–∞ 1543)
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–ï–†–ï–ù–ï–°–ï–ù–ê

---

## üîç –ê–ù–ê–õ–ò–ó –ü–†–û–ë–õ–ï–ú–´ –° –ö–ù–û–ü–ö–ê–ú–ò –í /settings

### –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã, –ø–æ—á–µ–º—É –∫–Ω–æ–ø–∫–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏:

1. ‚ùå **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –±–æ—Ç–∞**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handle_settings_callback` –±—ã–ª –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ `register_series_handlers`, –∞ –Ω–µ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è
   - **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `settings.py` –∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

2. ‚ùå **–î—Ä—É–≥–æ–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–ª callback —Ä–∞–Ω—å—à–µ**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –±—ã–ª –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–∏–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `call.data.startswith("")`), –æ–Ω –º–æ–≥ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ callback'–∏
   - **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `settings:` –∏–º–µ–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω `call.data.startswith("settings:")`
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

3. ‚ùå **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±—ã–ª –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ—Å–ª–µ –¥—Ä—É–≥–∏—Ö handlers**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ handlers –≤–∞–∂–µ–Ω, –µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
   - **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –í `main.py` `register_settings_handlers` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –¥—Ä—É–≥–∏—Ö handlers, –Ω–æ –¥–æ text_messages
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

4. ‚ùå **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –≤—ã–∑—ã–≤–∞–ª `answer_callback_query`**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ callback, –∫–Ω–æ–ø–∫–∞ –º–æ–∂–µ—Ç "–∑–∞–≤–∏—Å–Ω—É—Ç—å"
   - **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –í `handle_settings_callback` –µ—Å—Ç—å –≤—ã–∑–æ–≤ `bot_instance.answer_callback_query(call.id)` –≤ –Ω–∞—á–∞–ª–µ
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

5. ‚ùå **–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –±—ã–ª –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –Ω–µ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã `@bot_instance.callback_query_handler` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
   - **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –Ω–∞ –≤–µ—Ä—Ö–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å `settings.py`
   - **–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- ‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ `handle_settings_callback` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è `settings.py`
- ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä `@bot_instance.callback_query_handler` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `register_settings_handlers` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `main.py`
- ‚úÖ Debug-—Ö—ç–Ω–¥–ª–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω –≤ `main.py` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

---

## ‚úÖ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

### –†–∞–Ω–¥–æ–º:
- ‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã:** 8/8
- ‚úÖ **–í—Å–µ handlers –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã:** –î–∞
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ù–ï–°–ï–ù

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏:
- ‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã:** 9/9 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫ + –≤—Å–µ –ø–æ–¥—Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ **–í—Å–µ handlers –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã:** –î–∞
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ù–ï–°–ï–ù

### –°–ª—É—á–∞–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è:
- ‚úÖ **–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã:** 6/6
- ‚úÖ **–í—Å–µ handlers –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã:** –î–∞
- ‚úÖ **–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ:** –î–∞
- ‚úÖ **–°—Ç–∞—Ç—É—Å:** –ü–û–õ–ù–û–°–¢–¨–Æ –ü–ï–†–ï–ù–ï–°–ï–ù

---

## üìù –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É debug-—Ö—ç–Ω–¥–ª–µ—Ä–∞:** –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–∏ debug-—Ö—ç–Ω–¥–ª–µ—Ä –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤ /settings
2. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–ª—è—Ç—å—Å—è –ª–æ–≥–∏ `[SETTINGS CALLBACK]` –∏ `[DEBUG SETTINGS]`
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `register_settings_handlers` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `main.py`

---

**–í—ã–≤–æ–¥:** –í–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–∞–Ω–¥–æ–º–∞, –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —Å–ª—É—á–∞–π–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É. –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤ /settings –±—ã–ª–∞ —Å–≤—è–∑–∞–Ω–∞ —Å —Ç–µ–º, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –∞ –Ω–µ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `settings.py` –ø—Ä–æ–±–ª–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–µ—à–µ–Ω–∞.



