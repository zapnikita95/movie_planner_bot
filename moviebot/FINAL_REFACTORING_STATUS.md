# –°—Ç–∞—Ç—É—Å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. **–°–æ–∑–¥–∞–Ω –±–µ–∫–∞–ø –ø—Ä–æ–µ–∫—Ç–∞** - `movie_planner_bot_backup_*.tar.gz`

2. **–°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:**
   ```
   moviebot/
   ‚îú‚îÄ‚îÄ main.py                  ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îú‚îÄ‚îÄ config.py               ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îú‚îÄ‚îÄ states.py               ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îú‚îÄ‚îÄ scheduler.py            ‚úÖ –°–æ–∑–¥–∞–Ω (–∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã)
   ‚îú‚îÄ‚îÄ bot/
   ‚îÇ   ‚îú‚îÄ‚îÄ bot_init.py         ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îÇ   ‚îú‚îÄ‚îÄ commands.py        ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/
   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py        ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ list.py         ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îÇ   ‚îî‚îÄ‚îÄ callbacks/          ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞
   ‚îú‚îÄ‚îÄ database/               ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   ‚îú‚îÄ‚îÄ api/                    ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   ‚îú‚îÄ‚îÄ utils/                  ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   ‚îÇ   ‚îú‚îÄ‚îÄ helpers.py          ‚úÖ –°–æ–∑–¥–∞–Ω
   ‚îÇ   ‚îî‚îÄ‚îÄ parsing.py          ‚úÖ –ò–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   ‚îú‚îÄ‚îÄ web/                    ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –∏ –∏–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   ‚îî‚îÄ‚îÄ services/               ‚úÖ –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤:**
   - ‚úÖ `moviebot/database/db_operations.py`
   - ‚úÖ `moviebot/database/db_connection.py`
   - ‚úÖ `moviebot/api/kinopoisk_api.py`
   - ‚úÖ `moviebot/utils/parsing.py`
   - ‚úÖ `moviebot/web/web_app.py`
   - ‚úÖ `moviebot/scheduler.py`

## ‚ö†Ô∏è –í –ø—Ä–æ—Ü–µ—Å—Å–µ

### Handlers (—á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–∑–¥–∞–Ω—ã)
- ‚úÖ `handlers/start.py` - –∫–æ–º–∞–Ω–¥–∞ /start –∏ callbacks
- ‚úÖ `handlers/list.py` - –∫–æ–º–∞–Ω–¥–∞ /list
- ‚è≥ `handlers/seasons.py` - –∫–æ–º–∞–Ω–¥–∞ /seasons (–Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ moviebot.py)
- ‚è≥ `handlers/plan.py` - –∫–æ–º–∞–Ω–¥—ã /plan, /schedule (–Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ moviebot.py)
- ‚è≥ `handlers/payment.py` - –∫–æ–º–∞–Ω–¥–∞ /payment (–Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ moviebot.py)
- ‚è≥ `handlers/series.py` - –∫–æ–º–∞–Ω–¥—ã /search, /random, /premieres, /ticket, /settings, /help (–Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ moviebot.py)
- ‚è≥ `handlers/rate.py` - –∫–æ–º–∞–Ω–¥–∞ /rate (–Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ moviebot.py)
- ‚è≥ `handlers/stats.py` - –∫–æ–º–∞–Ω–¥—ã /stats, /total, /admin_stats (–Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ moviebot.py)
- ‚è≥ `handlers/other.py` - –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (–Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ—á—å –∏–∑ moviebot.py)

### Callbacks (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, –Ω—É–∂–Ω–æ –Ω–∞–ø–æ–ª–Ω–∏—Ç—å)
- ‚è≥ `callbacks/series_callbacks.py`
- ‚è≥ `callbacks/payment_callbacks.py`
- ‚è≥ `callbacks/search_callbacks.py`
- ‚è≥ `callbacks/random_callbacks.py`
- ‚è≥ `callbacks/premieres_callbacks.py`

## üìã –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Å–¥–µ–ª–∞—Ç—å

### –ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω–æ:

1. **–ò–∑–≤–ª–µ—á—å –≤—Å–µ handlers –∏–∑ moviebot.py** (24451 —Å—Ç—Ä–æ–∫–∞)
   - –ù–∞–π—Ç–∏ –≤—Å–µ `@bot.message_handler` –∏ `@bot.callback_query_handler`
   - –†–∞–∑–±–∏—Ç—å –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –≥—Ä—É–ø–ø–∞–º
   - –°–æ–∑–¥–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤ `bot/handlers/` –∏ `bot/callbacks/`

2. **–°–æ–∑–¥–∞—Ç—å api/yookassa_api.py**
   - –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –ÆKassa –∏–∑ handlers

3. **–û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ handlers**
   - –ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—ã –Ω–∞ `moviebot.*`

4. **–û–±–Ω–æ–≤–∏—Ç—å bot/commands.py**
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ handlers

5. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å**
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–æ–≤

6. **–ó–∞–ø—É—à–∏—Ç—å –Ω–∞ GitHub**

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç–∞—Ä—ã–π moviebot.py –∫–∞–∫ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫** - –æ–Ω –æ—Å—Ç–∞–ª—Å—è –Ω–∞ –º–µ—Å—Ç–µ
2. **–î–µ–ª–∞–π—Ç–µ –ø–æ –æ–¥–Ω–æ–º—É handler –∑–∞ —Ä–∞–∑** - —Ç–∞–∫ –ø—Ä–æ—â–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ handler** - —á—Ç–æ–±—ã –Ω–µ –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –æ—à–∏–±–∫–∏
4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ grep –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π** - `grep -n "def function_name" moviebot.py`

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –±–µ–∫–∞–ø–µ
- –í—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–æ–¥—É–ª—è—Ö –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è handlers
- `main.py` –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è handlers

